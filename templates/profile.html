<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Iuâ€‘venes | Profilo</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>
</head>
<body class="bg-gray-900 min-h-screen flex flex-col">

  <!-- Navbar -->
  <header class="w-full bg-gray-800 shadow">
    <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="{{ url_for('index') }}" class="text-white font-semibold text-lg hover:text-blue-400 transition">Home</a>
      <nav class="space-x-4">
        <!-- Future menu items -->
      </nav>
    </div>
  </header>

  <!-- Profile -->
  <main class="flex-grow flex items-center justify-center">
    <div class="w-full max-w-md bg-gray-800 rounded-2xl shadow-lg p-8 space-y-6">

      <h1 class="text-2xl font-semibold text-white text-center">Benvenuto nel tuo profilo</h1>
      <p class="text-gray-200 text-center">Il tuo tipo di account: <span class="font-medium text-blue-400">{{ user_type }}</span></p>

      <!-- Preview current profile pic -->
      {% if profile_pic %}
      <div class="flex justify-center">
        <img src="{{ url_for('uploaded_file', filename=profile_pic) }}"
             alt="Profile Pic"
             class="h-24 w-24 rounded-full object-cover border-2 border-blue-400" />
      </div>
      {% endif %}

      <!-- Profile update form -->
      <form method="POST" enctype="multipart/form-data" class="space-y-4">
        <!-- Upload new profile pic -->
        <div>
          <label for="profile_pic" class="block text-sm font-medium text-gray-200 mb-1">Foto Profilo</label>
          <input type="file"
                 name="profile_pic"
                 id="profile_pic"
                 accept="image/*"
                 class="block w-full text-gray-100 bg-gray-700 border border-gray-600 rounded-lg 
                        focus:outline-none focus:ring-2 focus:ring-blue-400 p-2" />
        </div>

        <!-- Edit bio -->
        <div>
          <label for="bio" class="block text-sm font-medium text-gray-200 mb-1">Bio</label>
          <textarea name="bio"
                    id="bio"
                    rows="4"
                    class="block w-full px-4 py-2 bg-gray-700 text-gray-100 border border-gray-600 rounded-lg 
                           focus:outline-none focus:ring-2 focus:ring-blue-400">{{ bio or '' }}</textarea>
        </div>

        <button type="submit"
                class="w-full py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition">
          Aggiorna Profilo
        </button>
      </form>

      <!-- Admin: view database -->
      {% if user_type == "Admin" %}
      <a href="{{ url_for('view_database') }}"
         class="block text-center py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
        Visualizza Database
      </a>
      {% endif %}

      <!-- Logout -->
      <a href="{{ url_for('logout') }}"
         class="block text-center mt-2 py-2 border border-blue-500 rounded-lg text-blue-400 hover:bg-gray-700 transition">
        Esci
      </a>

    </div>
  </main>

</body>
</html>
